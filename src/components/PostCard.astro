---
import type { CollectionEntry } from 'astro:content'
import { formatDate } from '@/utils/date'

type Props = {
  post: CollectionEntry<'post'>
}

const { post } = Astro.props
const { slug, data } = post
const { title, subtitle, date, tags } = data
---

<a
  href={`/blog/post/${slug}`}
  class="group block py-3 -mx-2 px-2 rounded-md hover:bg-neutral-200/50 dark:hover:bg-neutral-800/30 transition-colors"
>
  <div class="flex items-start justify-between gap-4">
    <div class="min-w-0 flex-1">
      <h3 class="text-sm text-neutral-900 dark:text-neutral-200 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors">
        {title}
      </h3>
      {subtitle && (
        <p class="text-xs text-neutral-600 dark:text-neutral-500 mt-1 truncate">
          {subtitle}
        </p>
      )}
      {tags && tags.length > 0 && (
        <div class="flex flex-wrap gap-1.5 mt-2">
          {tags.slice(0, 3).map((tag) => (
            <a
              href={`/blog/tag/${tag.toLowerCase().replace(/\s+/g, '-')}`}
              class="text-xs text-neutral-700 dark:text-neutral-600 hover:text-green-600 dark:hover:text-green-400 transition-colors"
            >
              #{tag}
            </a>
          ))}
        </div>
      )}
    </div>
    <time
      datetime={new Date(date).toISOString()}
      class="text-xs text-neutral-700 dark:text-neutral-600 shrink-0 pt-0.5"
    >
      {formatDate(date, 'short')}
    </time>
  </div>
</a>
